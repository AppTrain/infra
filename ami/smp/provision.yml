- name: packer ami
  hosts: all
  become: True
  gather_facts: True
  tasks:
    - name: laying ground work
      include_role: 
        name: base
    
    - name: postgres up
      include_role:
        name: postgres

    # - name: cloudwatch instance monitoring
    #   include_role:
    #     name: cloudwatch
    
    # - name: aws logs
    #   include_role:
    #     name: awslogs
    #   vars:
    #     awslogs_config:
    #       - file: /var/log/syslog
    #         datetime_format: "%b %d %H:%M:%S"
    #         log_group_name: syslog

    - name: build the database
      include_role:
        name: clone_smp